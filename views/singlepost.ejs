<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Single Post</title>
</head>
<body>
  <%- include('../partials/navbar.ejs') %>
  <div class="posts-container" style="height: auto;">
    <h1 style="text-align: center;">Single post page</h1>
    <div>
        <div style="display: flex">
            <% if (posts.icon.length < 2) { %>
                <img src="https://iptc.org/wp-content/uploads/2018/05/avatar-anonymous-300x300.png" style="width:40px; height:40px; margin-top: 10px; border-radius: 50%;">
                <h5 style="margin-left: 5px"><%= posts.name %></h5>
            <% } else { %>
                <img src="<%= posts.icon %>" style="width:40px; height:40px; margin-top: 10px; border-radius: 50%;">
                <h5 style="margin-left: 5px"><%= posts.name %></h5>
            <% } %>
        </div>
        <h3 style="text-align: left; margin-top: -5px"><%= posts.title %></h3>
        <% if (posts.urllink.length > 2) { %>
            <img src="<%= posts.urllink %>" alt="" style="width: 95%; margin-left: auto; margin-right: auto;">
        <% } else { %>
        <% } %>
        <p class="body" style="text-align: left;"><%= posts.body %></p>
        <p>Likes: <%= posts.likes %></p>
    </div>
        <button style="width: 15%; height: 8%; margin-left: 40%"><a class="delete" data-del="<%= posts.id %>">Delete</a></button>
    </div>
        <script>
            const delreq = document.querySelector('a.delete');
            delreq.addEventListener('click', (e) => {
                const endpoint = `/posts/${delreq.dataset.del}`;
                fetch(endpoint, {
                    method: 'DELETE',
                }).then(window.location.href = '/posts')
            });
        </script>
        <%- include('../partials/footer.ejs') %>
</body>
</html>

<style>
* {
  font-family: 'Open Sans', sans-serif;
}

html, body {
  margin: 0;
  padding: 0;
  background-color: #1677bc;
}
nav {
  max-width: 100%;
  display: flex;
  background-color: #ffffff;
  align-items: center;
  flex-direction: column;
}

nav div{
  width: 100%;
  height: auto;
  flex-grow: 3;
  padding: 10px;
}

nav div img {
  height: 30px;
  width: auto;
  margin-right: 30px;
}

nav div input[type=text] {
  width: 30%;
  padding: 5px;
  border: 2px solid lightgray;
  margin-left: auto;
  margin-right: auto;
}

nav div input[type=text]:focus {
  background-color: lightgray;
}

a {
  display: block;
  padding: 14px 16px;
  text-decoration: none;
  text-align: center;
}

.navlink :hover{
  background-color: lightgray;
}

div button {
  height: 32px;
  width: 20%;
  margin: 0;
  padding: 5px;
  border: none;
  border-top-right-radius: 4px;
  border-bottom-right-radius: 4px;
  cursor: pointer;
  color: white;
  background-color: #0f569c;
  font-size: 12px;
  font-weight: lighter;
}

.avatar img {
  position: absolute;
  right: 10px;
  top: 10px;
}

footer {
   position:absolute;
   width:100%;
   height:30px;
   display: flex;
   flex-direction: column;
}

.footer p {
  margin-left: auto;
  margin-right: auto;
}

.flex-container{
  background-color: white;
  width: 60%;
  height: 100%;
  margin-left: auto;
  margin-right: auto;
  display: flex;
  flex-direction: column;
}
.flex-row {
  display: flex;
}

.flex-container > div {
  margin-left: auto;
  margin-right: auto;
  margin-top: 20px;
  margin-bottom: 20px;
  background-color: white;
  width: 70%;
  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
  border-radius: 4px;
  color: gray;
  display: flex;
  flex-direction: column;
}

div img ~ p {
  margin: 15px 15px;
  font-weight: lighter;
}

.flex-container h2, .posts-container h2 {
  color: black;
  margin: 15px 15px;
  font-size: 20px;
  font-weight: lighter;
}

.flex-container img, .posts-container img {
  width: 100%;
}

.small img {
  margin: 15px;
  width: 30px;
}

.fa {
  cursor: pointer;
  user-select: none;
}

.fa:hover {
  color: darkblue;
}


.flex-container button, .posts-container button {
  height: 32px;
  width: 40px;
  margin: 15px 15px;
  padding: 5px;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  color: white;
  background-color: #0f569c;
  font-size: 20px;
  text-align: center;
}

.posts-container{
  background-color: white;
  width: 60%;
  height: 100%;
  margin-left: auto;
  margin-right: auto;
  display: flex;
  flex-direction: column;
}

.posts-container > div {
  height: auto;
  margin-left: 0;
  margin-right: 0;
  margin-top: 0;
  margin-bottom: 0;
  background-color: white;
  width: 100%;
  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
  border-radius: 4px;
  color: gray;
  display: flex;
  flex-direction: column;
}
</style>
